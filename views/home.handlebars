
<div id="topper" class="parallax">
	<div id="cur_string">
		{{current_string}}
	</div>
	<div id="badger">
		<a href="https://github.com/brianfunk/voncountdown"><img src="/badge" /></a>
	</div>
</div>

<div id="numberimg" data-number="{{current_number}}">
</div>

<!--
<div>
	current_number: {{current_number}}
	<br/>
	current_string: {{current_string}}
	<br/>
	current_comma: {{current_comma}}
</div>
-->

<section id="twitter">
	<img src="/img/CountVonCount.jpg" title="Count Von Countdown"/>
	<div id="tweets">	
		<a class="twitter-timeline" data-lang="en" data-width="600" data-height="308" data-dnt="true" data-theme="light" href="https://twitter.com/VonCountdown">Tweets by VonCountdown</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
	</div>
</section>

<div id="numbercom">
	{{current_comma}} and counting!!!!!!!!!!!!!!!!!!!!
</div>

<div id="vidpedia">

	<div id="wikiembed">
		<div>
			<img src="https://www.wikipedia.org/portal/wikipedia.org/assets/img/Wikipedia_wordmark.png">
			<a href="https://en.wikipedia.org/wiki/Count_von_Count">View on Wikipedia</a>
		</div>
		<iframe src="https://en.m.wikipedia.org/wiki/Count_von_Count"></iframe>
	</div>
	
	<div id="vidlaugh">
		<iframe width="395" height="220" src="https://www.youtube.com/embed/p3pKcRSmw2w" frameborder="0" allowfullscreen></iframe>
	</div>

</div>

<div id="botter" class="parallax">
	<div id="followbtn">
		<a href="https://twitter.com/VonCountdown" class="twitter-follow-button" data-size="large" data-lang="en" data-dnt="true" data-show-count="false">Follow @VonCountdown</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
	</div>	
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script>
function addImg(num) {
	// Escape the number to prevent XSS
	const safeNum = String(num).replace(/[^0-9]/g, '');
	if (safeNum) {
		$('#numberimg').append('<img id="img_'+ safeNum +'" src="/img/cvc_'+ safeNum +'.png" alt="Number '+ safeNum +'" />');
	}
}

// Safely get number from data attribute to prevent XSS
const numberElement = document.getElementById('numberimg');
const currentNumber = numberElement ? numberElement.dataset.number : '';
const cur_num = String(currentNumber || '');

if (cur_num) {
	for (var i=0; i<cur_num.length; i++) {	
		const digit = cur_num.charAt(i);
		// Validate digit is 0-9
		if (/^[0-9]$/.test(digit)) {
			addImg(digit);
			console.log(digit);
		}
	}
}

</script>
